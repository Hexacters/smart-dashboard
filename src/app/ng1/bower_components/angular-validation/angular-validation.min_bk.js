(function(){angular.module("validation",["validation.provider","validation.directive"])}).call(this);(function(){angular.module("validation.provider",[]).provider("$validation",function(){var h,i,g,d,a,c=this;var b=function(j){h=j;i=h.get("$rootScope");g=h.get("$http");d=h.get("$q");a=h.get("$timeout")};var f={};var e={};this.setExpression=function(j){angular.extend(f,j);return c};this.getExpression=function(j){return f[j]};this.setDefaultMsg=function(j){angular.extend(e,j);return c};this.getDefaultMsg=function(j){return e[j]};this.setErrorHTML=function(j){if(j.constructor!==Function){return}c.getErrorHTML=j;return c};this.getErrorHTML=function(j){return'<p class="validation-invalid">'+j+"</p>"};this.setSuccessHTML=function(j){if(j.constructor!==Function){return}c.getSuccessHTML=j;return c};this.getSuccessHTML=function(j){return'<p class="validation-valid">'+j+"</p>"};this.showSuccessMessage=true;this.showErrorMessage=true;this.checkValid=function(j){if(j.$valid===undefined){return false}return(j&&j.$valid===true)};this.validate=function(o){var m=d.defer(),j=0;if(o===undefined){console.error("This is not a regular Form name scope");m.reject("This is not a regular Form name scope");return m.promise}if(o.validationId){i.$broadcast(o.$name+"submit-"+o.validationId,j++)}else{if(o.constructor===Array){for(var l in o){i.$broadcast(o[l].$name+"submit-"+o[l].validationId,j++)}}else{for(var n in o){if(o[n]&&o[n].hasOwnProperty("$dirty")){i.$broadcast(n+"submit-"+o[n].validationId,j++)}}}}m.promise.success=function(k){m.promise.then(function(p){k(p)});return m.promise};m.promise.error=function(k){m.promise.then(null,function(p){k(p)});return m.promise};a(function(){if(c.checkValid(o)){m.resolve("success")}else{m.reject("error")}});return m.promise};this.reset=function(m){if(m===undefined){console.error("This is not a regular Form name scope");return}if(m.validationId){i.$broadcast(m.$name+"reset-"+m.validationId)}else{if(m.constructor===Array){for(var j in m){i.$broadcast(m[j].$name+"reset-"+m[j].validationId)}}else{for(var l in m){if(m[l].hasOwnProperty("$dirty")){i.$broadcast(l+"reset-"+m[l].validationId)}}}}};this.$get=["$injector",function(j){b(j);return{setErrorHTML:this.setErrorHTML,getErrorHTML:this.getErrorHTML,setSuccessHTML:this.setSuccessHTML,getSuccessHTML:this.getSuccessHTML,setExpression:this.setExpression,getExpression:this.getExpression,setDefaultMsg:this.setDefaultMsg,getDefaultMsg:this.getDefaultMsg,showSuccessMessage:this.showSuccessMessage,showErrorMessage:this.showErrorMessage,checkValid:this.checkValid,validate:this.validate,reset:this.reset}}]})}).call(this);(function(){angular.module("validation.directive",["validation.provider"]).directive("validator",["$injector",function(j){var c=j.get("$validation"),g=j.get("$q"),d=j.get("$timeout");var f=function(n,l,m,p,o){if(c.showSuccessMessage){n.next().html(c.getSuccessHTML(l||c.getDefaultMsg(m).success))}else{n.next().html("")}o.$setValidity(o.$name,true);if(p){p()}return true};var a=function(n,l,m,p,o){if(c.showErrorMessage){n.next().html(c.getErrorHTML(l||c.getDefaultMsg(m).error))}else{n.next().html("")}o.$setValidity(o.$name,false);if(p){p()}return false};var b=false;var k=function(x,q,w,m,o,v){var p=o.slice(0),n=e(p[0]),u=p.slice(1),t=n+"SuccessMessage",r=n+"ErrorMessage",s=c.getExpression(n),l={success:function(){f(q,w[t],n,x.validCallback,m);if(u.length){k(x,q,w,m,u,v)}else{return true}},error:function(){return a(q,w[r],n,x.invalidCallback,m)}};if(s===undefined){console.error('You are using undefined validator "%s"',n);if(u.length){k(x,q,w,m,u,v)}else{return}}if(s.constructor===Function){return g.all([c.getExpression(n)(v,x,q,w)]).then(function(y){if(y&&y.length>0&&y[0]){return l.success()}else{return l.error()}},function(){return l.error()})}else{if(s.constructor===RegExp){return c.getExpression(n).test(v)?l.success():l.error()}else{return l.error()}}};var e=function(l){return l.replace(/^\s+/,"").replace(/\s+$/,"")};var i=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};var h=function(){return(i()+i()+i()+i())};return{restrict:"A",require:"ngModel",scope:{model:"=ngModel",initialValidity:"=initialValidity",validCallback:"&",invalidCallback:"&"},link:function(q,p,n,r){var s=function(){};var m=n.validator.split(",");var o=r.validationId=h();p.after("<span></span>");var l=false;if(typeof q.initialValidity==="boolean"){l=q.initialValidity}r.$setValidity(r.$name,l);q.$on(r.$name+"reset-"+o,function(){s();b=false;r.$setViewValue("");r.$setPristine();r.$setValidity(r.$name,false);r.$render();p.next().html("")});(function(){q.$on(r.$name+"submit-"+o,function(u,t){var v=p[0].value,w=false;if(t===0){b=false}w=k(q,p,n,r,m,v);if(n.validMethod==="submit"){s();s=q.$watch("model",function(y,x){if(y===x){return}if(y===undefined||y===null){y=""}w=k(q,p,n,r,m,y)})}if(!b&&!w){b=true;p[0].focus()}});if(n.validMethod==="blur"){p.bind("blur",function(){var t=p[0].value;q.$apply(function(){k(q,p,n,r,m,t)})});return}if(n.validMethod==="submit"||n.validMethod==="submit-only"){return}q.$watch("model",function(t){if(r.$pristine&&r.$viewValue){r.$setViewValue(r.$viewValue)}else{if(r.$pristine){p.next().html("");return}}k(q,p,n,r,m,t)})})();d(function(){n.$observe("noValidationMessage",function(u){var t=p.next();if(u=="true"||u===true){t.css("display","none")}else{if(u=="false"||u===false){t.css("display","block")}else{}}})})}}}]).directive("validationSubmit",["$injector",function(d){var e=d.get("$validation"),b=d.get("$timeout"),c=d.get("$parse");return{priority:1,require:"?ngClick",link:function a(h,g,f){var i=c(f.validationSubmit)(h);b(function(){g.off("click");g.on("click",function(j){j.preventDefault();e.validate(i).success(function(){c(f.ngClick)(h)})})})}}}]).directive("validationReset",["$injector",function(d){var e=d.get("$validation"),b=d.get("$timeout"),c=d.get("$parse");return{link:function a(h,g,f){var i=c(f.validationReset)(h);b(function(){g.on("click",function(j){j.preventDefault();e.reset(i)})})}}}])}).call(this);